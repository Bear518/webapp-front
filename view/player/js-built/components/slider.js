define(["utils/underscore","utils/backbone.events","text!../templates/volume_slider.html","utils/helpers","utils/ui","utils/extendable"],function(t,e,i,s,n,r){var h=r.extend({constructor:function(t,e,i){this.className=e+"",this.orientation=i,this.dragStartListener=this.dragStart.bind(this),this.dragMoveListener=this.dragMove.bind(this),this.dragEndListener=this.dragEnd.bind(this),this.tapListener=this.tap.bind(this),this.setup(t)},setup:function(t){this.el=t,this.elementRail=this.el.getElementsByClassName("jx-slider-container")[0],this.elementProgress=this.el.getElementsByClassName("jx-progress")[0],this.elementThumb=this.el.getElementsByClassName("jx-knob")[0],this.elementTitle=this.el.getElementsByClassName("title")[0],this.userInteract=new n(this.element(),{preventScrolling:!0}),this.userInteract.on("dragStart",this.dragStartListener),this.userInteract.on("drag",this.dragMoveListener),this.userInteract.on("dragEnd",this.dragEndListener),this.userInteract.on("tap click",this.tapListener)},dragStart:function(){this.trigger("dragStart"),this.railBounds=s.bounds(this.elementRail)},dragEnd:function(t){this.dragMove(t),this.trigger("dragEnd")},dragMove:function(t){var e,i,n=this.railBounds=this.railBounds?this.railBounds:s.bounds(this.elementRail);"horizontal"===this.orientation?(e=t.pageX,i=e<n.left?0:e>n.right?100:100*s.between((e-n.left)/n.width,0,1)):(e=t.pageY,i=e>=n.bottom?0:e<=n.top?100:100*s.between((n.height-(e-n.top))/n.height,0,1));var r=this.limit(i);return this.render(r),this.update(r),!1},tap:function(t){this.railBounds=s.bounds(this.elementRail),this.dragMove(t)},limit:function(t){return t},update:function(t){this.trigger("update",{percentage:t})},render:function(t){t=Math.max(0,Math.min(t,100)),"horizontal"===this.orientation?(this.elementThumb.style.left=t+"%",this.elementProgress.style.width=t+"%"):(this.elementThumb.style.bottom=t+"%",this.elementProgress.style.height=t+"%")},updateBuffer:function(t){this.elementBuffer.style.width=t+"%"},element:function(){return this.el}});return h});