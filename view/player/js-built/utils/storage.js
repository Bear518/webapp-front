define(["utils/underscore","utils/helpers"],function(e,t){function r(e){return"jsplayer."+e}function n(){return e.reduce(this.persistItems,function(e,n){var i=a[r(n)];return i&&(e[n]=t.serialize(i)),e},{})}function i(e,t){try{a[r(e)]=t||0}catch(e){var n=window.jsplayer;n&&n.debug&&console.error(e)}}function o(e){var n=a[r(e)];return n&&(n=t.serialize(n)),n}function s(){e.each(this.persistItems,function(e){a.removeItem(r(e))})}function c(){this.persistItems=["volume","mute","qualityLabel","providerType"]}function u(t){e.each(this.persistItems,function(e){t.on("change:"+e,function(t,r){i(e,r)})})}var a={removeItem:t.noop};try{a=window.localStorage}catch(e){}return e.extend(c.prototype,{getAllItems:n,track:u,clear:s,setItem:i,getItem:o}),c});