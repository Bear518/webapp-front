define(["utils/browser","utils/underscore"],function(e,t){var n={loadScript:function(e,t){var n=document.createElement("script");n.src=e,n.async=!1;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r),this.finished(n,t)},loadStyle:function(e,t){var n=document.createElement("link");n.href=e,n.type="text/css",n.rel="stylesheet";var r=document.getElementsByTagName("link")[0];r.parentNode.insertBefore(n,r),this.finished(n,t)},finished:function(e,t){e.onload=function(){t&&t()}},loadProvider:function(e,t){for(var n in e)/script/.test(n)&&this.loadScript(e[n],t),/link/.test(n)&&this.loadStyle(e[n])}};n.log=function(){window.console&&("object"==typeof console.log?console.log(Array.prototype.slice.call(arguments,0)):console.log.apply(console,arguments))},n.between=function(e,t,n){return Math.max(Math.min(e,n),t)},n.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},n.bounds=function(e){var t={left:0,right:0,width:0,height:0,top:0,bottom:0};if(!e||!document.body.contains(e))return t;var n=e.getBoundingClientRect(),r=window.pageYOffset,i=window.pageXOffset;return n.width||n.height||n.left||n.top?(t.left=n.left+i,t.right=n.right+i,t.top=n.top+r,t.bottom=n.bottom+r,t.width=n.right-n.left,t.height=n.bottom-n.top,t):t},n.serialize=function(e){if(void 0===e)return null;if("string"==typeof e&&e.length<6){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if(!isNaN(Number(e))&&!isNaN(parseFloat(e)))return Number(e)}return e};var r=function(e){return t.isString(e.className)?e.className.split(" "):[]},i=function(e){return e.replace(/^\s+|\s+$/g,"")},o=function(e,t){t=i(t),e.className!==t&&(e.className=t)};n.addClass=function(e,n){var i=r(e),s=t.isArray(n)?n:n.split(" ");t.each(s,function(e){t.contains(i,e)||i.push(e)}),o(e,i.join(" "))},n.removeClass=function(e,n){var i=r(e),s=t.isArray(n)?n:n.split(" ");o(e,t.difference(i,s).join(" "))};var s=function(e,t){var n;return["webkit","moz","ms","o",""].forEach(function(r){if(!n){""===r&&(t=t.slice(0,1).toLowerCase()+t.slice(1));var i=typeof e[r+t];i+""!="undefined"&&(n="function"===i?e[r+t]():e[r+t])}}),n};return n.isFullScreen=function(){if(s(document,"FullScreen")||s(document,"IsFullScreen")||document.IsFullScreen)return!0},t.extend(n,e),n});